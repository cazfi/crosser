diff -Nurd zlib/configure zlib/configure
--- zlib/configure	2010-01-11 00:24:56.000000000 +0200
+++ zlib/configure	2010-02-03 16:46:17.000000000 +0200
@@ -187,8 +187,8 @@
 if test $shared -eq 1; then
   echo Checking for shared library support...
   # we must test in two steps (cc then ld), required at least on SunOS 4.x
-  if test "`($CC -w -c $SFLAGS $test.c) 2>&1`" = "" &&
-     test "`($LDSHARED -o $test$shared_ext $test.o) 2>&1`" = ""; then
+  if $CC -w -c $SFLAGS $test.c >/dev/null 2>&1 &&
+     $LDSHARED -o $test$shared_ext $test.o >/dev/null 2>&1 ; then
     echo Building shared library $SHAREDLIBV with $CC.
   elif test -z "$old_cc" -a -z "$old_cflags"; then
     echo No shared library support.
@@ -224,7 +224,7 @@
 #include <sys/types.h>
 off64_t dummy = 0;
 EOF
-if test "`($CC -c $CFLAGS -D_LARGEFILE64_SOURCE=1 $test.c) 2>&1`" = ""; then
+if $CC -c $CFLAGS -D_LARGEFILE64_SOURCE=1 $test.c >/dev/null 2>&1 ; then
   CFLAGS="${CFLAGS} -D_LARGEFILE64_SOURCE=1"
   SFLAGS="${SFLAGS} -D_LARGEFILE64_SOURCE=1"
   ALL="${ALL} all64"
@@ -240,7 +240,7 @@
   return 0;
 }
 EOF
-  if test "`($CC $CFLAGS -o $test $test.c) 2>&1`" = ""; then
+  if $CC $CFLAGS -o $test $test.c >/dev/null 2>&1 ; then
     echo "Checking for fseeko... Yes."
   else
     CFLAGS="${CFLAGS} -DNO_FSEEKO"
@@ -253,7 +253,7 @@
 #include <unistd.h>
 int main() { return 0; }
 EOF
-if test "`($CC -c $CFLAGS $test.c) 2>&1`" = ""; then
+if $CC -c $CFLAGS $test.c >/dev/null 2>&1 ; then
   cat >> zlibdefs.h <<EOF
 #include <sys/types.h>	/* for off_t */
 #include <unistd.h>	/* for SEEK_* and off_t */
@@ -290,7 +290,7 @@
 }
 EOF
 
-if test "`($CC -c $CFLAGS $test.c) 2>&1`" = ""; then
+if $CC -c $CFLAGS $test.c >/dev/null 2>&1 ; then
   echo "Checking whether to use vs[n]printf() or s[n]printf()... using vs[n]printf()."
 
   cat > $test.c <<EOF
@@ -314,7 +314,7 @@
 }
 EOF
 
-  if test "`($CC $CFLAGS -o $test $test.c) 2>&1`" = ""; then
+  if $CC $CFLAGS -o $test $test.c >/dev/null 2>&1 ; then
     echo "Checking for vsnprintf() in stdio.h... Yes."
 
     cat >$test.c <<EOF
@@ -339,7 +339,7 @@
 }
 EOF
 
-    if test "`($CC -c $CFLAGS $test.c) 2>&1`" = ""; then
+    if $CC -c $CFLAGS $test.c >/dev/null 2>&1 ; then
       echo "Checking for return value of vsnprintf()... Yes."
     else
       CFLAGS="$CFLAGS -DHAS_vsnprintf_void"
@@ -379,7 +379,7 @@
 }
 EOF
 
-    if test "`($CC -c $CFLAGS $test.c) 2>&1`" = ""; then
+    if $CC -c $CFLAGS $test.c >/dev/null 2>&1 ; then
       echo "Checking for return value of vsprintf()... Yes."
     else
       CFLAGS="$CFLAGS -DHAS_vsprintf_void"
@@ -410,7 +410,7 @@
 }
 EOF
 
-  if test "`($CC $CFLAGS -o $test $test.c) 2>&1`" = ""; then
+  if $CC $CFLAGS -o $test $test.c >/dev/null 2>&1 ; then
     echo "Checking for snprintf() in stdio.h... Yes."
 
     cat >$test.c <<EOF
@@ -429,7 +429,7 @@
 }
 EOF
 
-    if test "`($CC -c $CFLAGS $test.c) 2>&1`" = ""; then
+    if $CC -c $CFLAGS $test.c >/dev/null 2>&1 ; then
       echo "Checking for return value of snprintf()... Yes."
     else
       CFLAGS="$CFLAGS -DHAS_snprintf_void"
@@ -463,7 +463,7 @@
 }
 EOF
 
-    if test "`($CC -c $CFLAGS $test.c) 2>&1`" = ""; then
+    if $CC -c $CFLAGS $test.c >/dev/null 2>&1 ; then
       echo "Checking for return value of sprintf()... Yes."
     else
       CFLAGS="$CFLAGS -DHAS_sprintf_void"
@@ -480,7 +480,7 @@
 #include <errno.h>
 int main() { return 0; }
 EOF
-if test "`($CC -c $CFLAGS $test.c) 2>&1`" = ""; then
+if $CC -c $CFLAGS $test.c >/dev/null 2>&1 ; then
   echo "Checking for errno.h... Yes."
 else
   echo "Checking for errno.h... No."
@@ -496,7 +496,7 @@
   return mmap((caddr_t)0, (off_t)0, PROT_READ, MAP_SHARED, 0, (off_t)0);
 }
 EOF
-if test "`($CC -c $CFLAGS $test.c) 2>&1`" = ""; then
+if $CC -c $CFLAGS $test.c >/dev/null 2>&1 ; then
   CFLAGS="$CFLAGS -DUSE_MMAP"
   SFLAGS="$SFLAGS -DUSE_MMAP"
   echo Checking for mmap support... Yes.
